// Code generated by goctl. DO NOT EDIT!

package solmodel

import (
	"context"
	"database/sql"
	"strings"
	"time"

	"github.com/klen-ygs/gorm-zero/gormc"
	. "github.com/klen-ygs/gorm-zero/gormc/sql"
	"gorm.io/gorm"
)

// avoid unused err
var _ = time.Second

type (
	tokenModel interface {
		Insert(ctx context.Context, data *Token) error

		FindOne(ctx context.Context, id int64) (*Token, error)
		FindOneByChainIdAddress(ctx context.Context, chainId int64, address string) (*Token, error)
		FindOneByChainIdAddressSymbol(ctx context.Context, chainId int64, address string, symbol string) (*Token, error)
		Update(ctx context.Context, data *Token) error

		Delete(ctx context.Context, id int64) error
	}

	defaultTokenModel struct {
		conn  *gorm.DB
		table string
	}

	Token struct {
		Id                int64        `gorm:"column:id"`
		ChainId           int64        `gorm:"column:chain_id"`             // Chain ID
		Address           string       `gorm:"column:address"`              // Token contract address
		Program           string       `gorm:"column:program"`              // program
		Name              string       `gorm:"column:name"`                 // Token name
		Symbol            string       `gorm:"column:symbol"`               // Token symbol
		Decimals          int64        `gorm:"column:decimals"`             // Token decimals
		TotalSupply       float64      `gorm:"column:total_supply"`         // Total token supply
		Icon              string       `gorm:"column:icon"`                 // Token icon URL
		Description       string       `gorm:"column:description"`          // Token description
		HoldCount         int64        `gorm:"column:hold_count"`           // Number of holders
		IsCaDropOwner     int64        `gorm:"column:is_ca_drop_owner"`     // Owner rights renounced
		IsCaVerify        int64        `gorm:"column:is_ca_verify"`         // Contract verified
		IsHoneyScam       int64        `gorm:"column:is_honey_scam"`        // Honeypot check (Cannot sell)
		IsLiquidLock      int64        `gorm:"column:is_liquid_lock"`       // Liquidity locked
		IsCanPauseTrade   int64        `gorm:"column:is_can_pause_trade"`   // Can pause trading
		IsCanChangeTax    int64        `gorm:"column:is_can_change_tax"`    // Can modify tax rate
		IsHaveBlackList   int64        `gorm:"column:is_have_black_list"`   // Has blacklist mechanism
		IsCanAllSell      int64        `gorm:"column:is_can_all_sell"`      // Can sell entire balance
		IsHaveProxy       int64        `gorm:"column:is_have_proxy"`        // Has proxy contract
		IsCanExternalCall int64        `gorm:"column:is_can_external_call"` // Contract can make external calls
		IsCanAddToken     int64        `gorm:"column:is_can_add_token"`     // Contract has minting capability
		IsCanChangeToken  int64        `gorm:"column:is_can_change_token"`  // Owner can modify user balances
		SellTax           float64      `gorm:"column:sell_tax"`             // Sell tax rate
		BuyTax            float64      `gorm:"column:buy_tax"`              // Buy tax rate
		TwitterUsername   string       `gorm:"column:twitter_username"`     // Twitter username
		Website           string       `gorm:"column:website"`              // Official website
		Telegram          string       `gorm:"column:telegram"`             // Telegram link
		CreatedAt         time.Time    `gorm:"column:created_at"`
		UpdatedAt         time.Time    `gorm:"column:updated_at"`
		DeletedAt         sql.NullTime `gorm:"column:deleted_at;index"`
		IsCheckCa         int64        `gorm:"column:is_check_ca"`  // Contract analysis completed
		CheckCaAt         int64        `gorm:"column:check_ca_at"`  // Contract analysis timestamp
		IsBurnPool        int64        `gorm:"column:is_burn_pool"` // Indicates if the token is part of a burn pool
		IsTopTen          int64        `gorm:"column:is_top_ten"`   // Indicates if the token is in the top ten by market capitalization
		AuditSource       string       `gorm:"column:audit_source"` // Audit source
		Slot              int64        `gorm:"column:slot"`
	}
)

var QToken Token

func init() {
	InitField(&QToken)
}

func (Token) TableName() string {
	return strings.Trim("`token`", "`")
}

func newTokenModel(conn *gorm.DB) *defaultTokenModel {
	return &defaultTokenModel{
		conn:  conn,
		table: strings.Trim("`token`", "`"),
	}
}

func (m *defaultTokenModel) Insert(ctx context.Context, data *Token) error {
	db := m.conn
	err := db.WithContext(ctx).Save(&data).Error
	return err
}

func (m *defaultTokenModel) FindOne(ctx context.Context, id int64) (*Token, error) {
	var resp Token
	err := m.conn.WithContext(ctx).Model(&Token{}).Where("`id` = @id", sql.Named("id", id)).Take(&resp).Error
	if err == gormc.ErrNotFound {
		return nil, err
	}
	return &resp, err

}

func (m *defaultTokenModel) FindOneByChainIdAddress(ctx context.Context, chainId int64, address string) (*Token, error) {
	var resp Token
	err := m.conn.WithContext(ctx).Model(&Token{}).Where("`chain_id` = ? and `address` = ?", chainId, address).Take(&resp).Error
	if err == gormc.ErrNotFound {
		return nil, err
	}
	return &resp, err
}

func (m *defaultTokenModel) FindOneByChainIdAddressSymbol(ctx context.Context, chainId int64, address string, symbol string) (*Token, error) {
	var resp Token
	err := m.conn.WithContext(ctx).Model(&Token{}).Where("`chain_id` = ? and `address` = ? and `symbol` = ?", chainId, address, symbol).Take(&resp).Error
	if err == gormc.ErrNotFound {
		return nil, err
	}
	return &resp, err
}

func (m *defaultTokenModel) Update(ctx context.Context, data *Token) error {
	db := m.conn
	err := db.WithContext(ctx).Save(data).Error
	return err
}

func (m *defaultTokenModel) Delete(ctx context.Context, id int64) error {
	db := m.conn
	err := db.WithContext(ctx).Where("`id` = @id", sql.Named("id", id)).Delete(&Token{}).Error

	return err
}
