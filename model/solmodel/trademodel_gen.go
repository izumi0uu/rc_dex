// Code generated by goctl. DO NOT EDIT!

package solmodel

import (
	"context"
	"database/sql"
	"strings"
	"time"

	"github.com/klen-ygs/gorm-zero/gormc"
	. "github.com/klen-ygs/gorm-zero/gormc/sql"
	"gorm.io/gorm"
)

// avoid unused err
var _ = time.Second

type (
	tradeModel interface {
		Insert(ctx context.Context, data *Trade) error

		FindOne(ctx context.Context, id int64) (*Trade, error)
		FindOneByHashId(ctx context.Context, hashId string) (*Trade, error)
		Update(ctx context.Context, data *Trade) error

		Delete(ctx context.Context, id int64) error
	}

	defaultTradeModel struct {
		conn  *gorm.DB
		table string
	}

	Trade struct {
		Id                int64        `gorm:"column:id"`
		ChainId           int64        `gorm:"column:chain_id"`             // Chain ID
		PairAddr          string       `gorm:"column:pair_addr"`            // Trading pair contract address
		TxHash            string       `gorm:"column:tx_hash"`              // Transaction hash
		HashId            string       `gorm:"column:hash_id"`              // Transaction ID
		Maker             string       `gorm:"column:maker"`                // Transaction initiator
		TradeType         string       `gorm:"column:trade_type"`           // Trade type
		BaseTokenAmount   float64      `gorm:"column:base_token_amount"`    // Base token amount in this trade
		TokenAmount       float64      `gorm:"column:token_amount"`         // Token amount in this trade
		BaseTokenPriceUsd float64      `gorm:"column:base_token_price_usd"` // Base token price in USD
		TotalUsd          float64      `gorm:"column:total_usd"`            // Total trade value in USD
		TokenPriceUsd     float64      `gorm:"column:token_price_usd"`      // Token price in USD
		To                string       `gorm:"column:to"`                   // Token recipient
		BlockNum          int64        `gorm:"column:block_num"`            // Block height
		BlockTime         time.Time    `gorm:"column:block_time"`           // Block timestamp
		BlockTimeStamp    int64        `gorm:"column:block_time_stamp"`     // Transaction timestamp
		SwapName          string       `gorm:"column:swap_name"`            // DEX name
		CreatedAt         time.Time    `gorm:"column:created_at"`
		UpdatedAt         time.Time    `gorm:"column:updated_at"`
		DeletedAt         sql.NullTime `gorm:"column:deleted_at;index"`
	}
)

var QTrade Trade

func init() {
	InitField(&QTrade)
}

func (Trade) TableName() string {
	return strings.Trim("`trade`", "`")
}

func newTradeModel(conn *gorm.DB) *defaultTradeModel {
	return &defaultTradeModel{
		conn:  conn,
		table: strings.Trim("`trade`", "`"),
	}
}

func (m *defaultTradeModel) Insert(ctx context.Context, data *Trade) error {
	db := m.conn
	err := db.WithContext(ctx).Save(&data).Error
	return err
}

func (m *defaultTradeModel) FindOne(ctx context.Context, id int64) (*Trade, error) {
	var resp Trade
	err := m.conn.WithContext(ctx).Model(&Trade{}).Where("`id` = @id", sql.Named("id", id)).Take(&resp).Error
	if err == gormc.ErrNotFound {
		return nil, err
	}
	return &resp, err

}

func (m *defaultTradeModel) FindOneByHashId(ctx context.Context, hashId string) (*Trade, error) {
	var resp Trade
	err := m.conn.WithContext(ctx).Model(&Trade{}).Where("`hash_id` = ?", hashId).Take(&resp).Error
	if err == gormc.ErrNotFound {
		return nil, err
	}
	return &resp, err
}

func (m *defaultTradeModel) Update(ctx context.Context, data *Trade) error {
	db := m.conn
	err := db.WithContext(ctx).Save(data).Error
	return err
}

func (m *defaultTradeModel) Delete(ctx context.Context, id int64) error {
	db := m.conn
	err := db.WithContext(ctx).Where("`id` = @id", sql.Named("id", id)).Delete(&Trade{}).Error

	return err
}
