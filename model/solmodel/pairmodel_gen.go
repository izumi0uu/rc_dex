// Code generated by goctl. DO NOT EDIT!

package solmodel

import (
	"context"
	"database/sql"
	"strings"
	"time"

	"github.com/klen-ygs/gorm-zero/gormc"
	. "github.com/klen-ygs/gorm-zero/gormc/sql"
	"gorm.io/gorm"
)

// avoid unused err
var _ = time.Second

type (
	pairModel interface {
		Insert(ctx context.Context, data *Pair) error

		FindOne(ctx context.Context, id int64) (*Pair, error)
		FindOneByChainIdAddress(ctx context.Context, chainId int64, address string) (*Pair, error)
		Update(ctx context.Context, data *Pair) error

		Delete(ctx context.Context, id int64) error
	}

	defaultPairModel struct {
		conn  *gorm.DB
		table string
	}

	Pair struct {
		Id                           int64        `gorm:"column:id"`
		ChainId                      int64        `gorm:"column:chain_id"`                   // Chain ID
		Address                      string       `gorm:"column:address"`                    // Trading pair address
		Name                         string       `gorm:"column:name"`                       // DEX factory version swap name
		FactoryAddress               string       `gorm:"column:factory_address"`            // Factory contract address
		BaseTokenAddress             string       `gorm:"column:base_token_address"`         // Base token address
		TokenAddress                 string       `gorm:"column:token_address"`              // Token address
		BaseTokenSymbol              string       `gorm:"column:base_token_symbol"`          // Base token symbol
		TokenSymbol                  string       `gorm:"column:token_symbol"`               // Token symbol
		BaseTokenDecimal             int64        `gorm:"column:base_token_decimal"`         // Base token decimals
		TokenDecimal                 int64        `gorm:"column:token_decimal"`              // Token decimals
		BaseTokenIsNativeToken       int64        `gorm:"column:base_token_is_native_token"` // Is base token native currency
		BaseTokenIsToken0            int64        `gorm:"column:base_token_is_token0"`       // Is base token token0
		InitBaseTokenAmount          float64      `gorm:"column:init_base_token_amount"`     // Initial base token liquidity
		InitTokenAmount              float64      `gorm:"column:init_token_amount"`          // Initial token liquidity
		CurrentBaseTokenAmount       float64      `gorm:"column:current_base_token_amount"`  // Current base token liquidity
		CurrentTokenAmount           float64      `gorm:"column:current_token_amount"`       // Current token liquidity
		Fdv                          float64      `gorm:"column:fdv"`                        // Fully diluted valuation
		MktCap                       float64      `gorm:"column:mkt_cap"`                    // Market capitalization
		TokenPrice                   float64      `gorm:"column:token_price"`                // Token price
		BaseTokenPrice               float64      `gorm:"column:base_token_price"`           // Base token price
		BlockNum                     int64        `gorm:"column:block_num"`                  // Creation block height
		BlockTime                    time.Time    `gorm:"column:block_time"`                 // Creation block timestamp
		CreatedAt                    time.Time    `gorm:"column:created_at"`
		UpdatedAt                    time.Time    `gorm:"column:updated_at"`
		DeletedAt                    sql.NullTime `gorm:"column:deleted_at;index"`
		HighestTokenPrice            float64      `gorm:"column:highest_token_price"`              // Highest token price
		LatestTradeTime              time.Time    `gorm:"column:latest_trade_time"`                // Latest on-chain trade timestamp
		PumpPoint                    float64      `gorm:"column:pump_point"`                       // Pump score
		LaunchPadPoint               float64      `gorm:"column:launch_pad_point"`                 // LaunchPad progress
		PumpLaunched                 int64        `gorm:"column:pump_launched"`                    // Pump launched (0: false, 1: true)
		PumpMarketCap                float64      `gorm:"column:pump_market_cap"`                  // Pump market cap
		PumpOwner                    string       `gorm:"column:pump_owner"`                       // Pump owner address
		PumpSwapPairAddr             string       `gorm:"column:pump_swap_pair_addr"`              // Pump swap pair address
		PumpVirtualBaseTokenReserves float64      `gorm:"column:pump_virtual_base_token_reserves"` // Pump virtual base token reserves
		PumpVirtualTokenReserves     float64      `gorm:"column:pump_virtual_token_reserves"`      // Pump virtual token reserves
		PumpStatus                   int64        `gorm:"column:pump_status"`                      // Pump status
		PumpPairAddr                 string       `gorm:"column:pump_pair_addr"`                   // Pump pair address
		Slot                         int64        `gorm:"column:slot"`
		Liquidity                    float64      `gorm:"column:liquidity"`         // Liquidity
		LaunchPadStatus              int64        `gorm:"column:launch_pad_status"` // LaunchPad status: 0-not launchpad, 1-new creation, 2-completing, 3-completed
	}
)

var QPair Pair

func init() {
	InitField(&QPair)
}

func (Pair) TableName() string {
	return strings.Trim("`pair`", "`")
}

func newPairModel(conn *gorm.DB) *defaultPairModel {
	return &defaultPairModel{
		conn:  conn,
		table: strings.Trim("`pair`", "`"),
	}
}

func (m *defaultPairModel) Insert(ctx context.Context, data *Pair) error {
	db := m.conn
	err := db.WithContext(ctx).Save(&data).Error
	return err
}

func (m *defaultPairModel) FindOne(ctx context.Context, id int64) (*Pair, error) {
	var resp Pair
	err := m.conn.WithContext(ctx).Model(&Pair{}).Where("`id` = @id", sql.Named("id", id)).Take(&resp).Error
	if err == gormc.ErrNotFound {
		return nil, err
	}
	return &resp, err

}

func (m *defaultPairModel) FindOneByChainIdAddress(ctx context.Context, chainId int64, address string) (*Pair, error) {
	var resp Pair
	err := m.conn.WithContext(ctx).Model(&Pair{}).Where("`chain_id` = ? and `address` = ?", chainId, address).Take(&resp).Error
	if err == gormc.ErrNotFound {
		return nil, err
	}
	return &resp, err
}

func (m *defaultPairModel) Update(ctx context.Context, data *Pair) error {
	db := m.conn
	err := db.WithContext(ctx).Save(data).Error
	return err
}

func (m *defaultPairModel) Delete(ctx context.Context, id int64) error {
	db := m.conn
	err := db.WithContext(ctx).Where("`id` = @id", sql.Named("id", id)).Delete(&Pair{}).Error

	return err
}
